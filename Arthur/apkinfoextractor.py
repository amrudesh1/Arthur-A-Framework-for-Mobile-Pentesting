from pkg_resources import ExtractionError
import sys
from Arthur import apktool as ap
from Arthur import manifestparser as mp


class ApkInfoExtractor:
    def __init__(self, args):
        self.apk_path = args.APK
        self.apktool = ap.Apktool()
        self.decompile_apk()
        # self.start_apk_extraction('Arthur/temp/Sample')

    def decompile_apk(self):
        apktool_status, apk_extracted_path = self.apktool.decompile_apk(
            self.apk_path)
        if apktool_status == 0:
            print("De-compilation Complete....Please wait.....")
            self.start_apk_extraction('Arthur/temp/Sample')
        else:
            print("De-compilation Failed")
            sys.exit(1)

    @staticmethod
    def start_apk_extraction(apk_extracted_path):
        mp.ManifestParser(apk_extracted_path)
        mp
